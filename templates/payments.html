{% extends "base.html" %} <!-- Inherit layout from base template -->

{% block content %}
<h1>Payments</h1>

<!-- Button to navigate to the form for adding a new payment -->
<a href="{{ url_for('add_payment_form') }}">
    <button class="btn-edit" style="margin-bottom:20px;">âž• Add Payment</button>
</a>

<!-- Table displaying all payments -->
<table>
    <tr>
        <th>Member</th> <!-- Name of the member who made the payment -->
        <th>Amount</th> <!-- Payment amount -->
        <th>Date</th> <!-- Payment date -->
        <th>Method</th> <!-- Payment method: Cash, Card, or EFT -->
        <th>Actions</th> <!-- Buttons for editing or deleting payment -->
    </tr>
    {% for p in payments %}
    <tr>
        <!-- Display member name; fallback to 'Unknown' if member was deleted -->
        <td>{{ p.member.name if p.member else 'Unknown' }}</td>
        <td>R{{ p.amount }}</td> <!-- Show amount with currency symbol -->
        <td>{{ p.date }}</td> <!-- Payment date -->
        <td>{{ p.method }}</td> <!-- Payment method -->
        <td>
            <!-- Edit payment button -->
            <a href="{{ url_for('edit_payment', id=p.id) }}" class="btn-edit">Edit</a>
            <!-- Delete payment button -->
            <a href="{{ url_for('delete_payment', id=p.id) }}" class="btn-delete">Delete</a>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}

